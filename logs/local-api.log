[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
‚úÖ PostgreSQL database connection successful
‚úÖ AWS Cognito configuration loaded
   User Pool: us-west-2_xeXlyFBMH
   Client ID: 7ek8kg1td2ps985r21m7727q98
   Region: us-west-2

======================================================================
  üöÄ Ataraxia REAL API Server (Cognito + PostgreSQL)
======================================================================

  Server running on: http://localhost:3010
  Environment: REAL Production-Ready
  Database: PostgreSQL (Connected)
  Authentication: AWS Cognito (us-west-2_xeXlyFBMH)

  üîê REAL Auth Endpoints:
    POST   /api/auth/login             - Real Cognito Login
    POST   /api/auth/register          - Real Cognito Registration
    GET    /api/auth/me               - Real User Profile
    POST   /api/auth/logout           - Logout
    POST   /api/auth/forgot-password  - Real Password Reset
    POST   /api/auth/phone/send-code  - SMS Verification
    POST   /api/auth/phone/verify-code - SMS Code Verification
    POST   /api/auth/google           - Google OAuth
    POST   /api/auth/therapist/register - Complete Therapist Registration

  üë®‚Äç‚öïÔ∏è MODERN Therapist Service (PostgreSQL + Cognito):
    GET    /api/therapist             - Get All Therapists (with filters)
    GET    /api/therapist/:id         - Get Therapist Details
    PUT    /api/therapist/:id         - Update Therapist Profile
    GET    /api/therapist/:id/availability - Get Availability
    PUT    /api/therapist/:id/availability - Update Availability

  üë§ MODERN Client Service (PostgreSQL + Cognito):
    GET    /api/client                - Get All Clients (with filters)
    GET    /api/client/:id            - Get Client Details
    PUT    /api/client/:id            - Update Client Profile
    POST   /api/client/:id/assign     - Assign Therapist to Client

  üè• System Endpoints:
    GET    /health                    - Health check

======================================================================

  üí° Frontend Configuration:
     Update your frontend .env.local:
     VITE_API_BASE_URL=http://localhost:3010

  üéâ NO MORE MOCK DATA - This is the REAL system!

======================================================================

[2026-02-01T01:55:12.161Z] POST /api/auth/login
  Body: {
  "email": "test@example.com",
  "password": "pwd"
}
üîê Login attempt via AuthProvider: { email: 'test@example.com', password: '***' }
üîÑ Fetching Auth Config from Database/Env...
üîÑ Initializing Auth Provider: firebase
üî• Initializing Firebase Provider
‚ùå Login error: Error: Firebase Server-Side Login not supported directly in Admin SDK. Use Client SDK to get ID Token, then use verifyToken on backend.
    at FirebaseProvider.signIn (/Users/cvp/anti-gravity/Ataraxia-Next/dist/lib/auth/providers/FirebaseProvider.js:41:15)
    at /Users/cvp/anti-gravity/Ataraxia-Next/local-api-server.js:464:41
{"timestamp":"2026-02-01T01:55:14.038Z","level":"INFO","service":"config-manager","message":"Default configurations initialized"}
[2026-02-01T02:05:18.690Z] GET /health
[2026-02-01T03:39:40.536Z] GET /api/therapist
üìä Found 13 therapists (13 total)
[2026-02-01T03:39:40.873Z] GET /api/therapist/search
[2026-02-01T03:39:40.921Z] POST /api/auth/login
‚ùå Login error: TypeError: Cannot destructure property 'email' of 'req.body' as it is undefined.
    at /Users/cvp/anti-gravity/Ataraxia-Next/local-api-server.js:452:13
    at Layer.handleRequest (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/lib/layer.js:152:17)
    at next (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/lib/route.js:157:13)
    at Route.dispatch (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/lib/route.js:117:3)
    at handle (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/index.js:435:11)
    at Layer.handleRequest (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/lib/layer.js:152:17)
    at /Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/index.js:295:15
    at processParams (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/index.js:582:12)
    at next (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/index.js:291:5)
    at /Users/cvp/anti-gravity/Ataraxia-Next/local-api-server.js:73:3
[2026-02-01T03:39:40.925Z] POST /api/auth/register
‚ùå Registration error: TypeError: Cannot destructure property 'email' of 'req.body' as it is undefined.
    at /Users/cvp/anti-gravity/Ataraxia-Next/local-api-server.js:541:13
    at Layer.handleRequest (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/lib/layer.js:152:17)
    at next (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/lib/route.js:157:13)
    at Route.dispatch (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/lib/route.js:117:3)
    at handle (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/index.js:435:11)
    at Layer.handleRequest (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/lib/layer.js:152:17)
    at /Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/index.js:295:15
    at processParams (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/index.js:582:12)
    at next (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/index.js:291:5)
    at /Users/cvp/anti-gravity/Ataraxia-Next/local-api-server.js:73:3
[2026-02-01T03:39:40.929Z] GET /api/verification/status/test
[2026-02-01T03:39:40.956Z] GET /api/therapist
üìä Found 13 therapists (13 total)
[2026-02-01T03:39:41.011Z] GET /api/therapist/search
[2026-02-01T03:39:41.044Z] GET /api/auth/login
[2026-02-01T03:46:03.403Z] GET /api/therapist
üìä Found 13 therapists (13 total)
[2026-02-01T03:46:03.674Z] GET /api/therapist/search
[2026-02-01T03:46:03.719Z] POST /api/auth/login
‚ùå Login error: TypeError: Cannot destructure property 'email' of 'req.body' as it is undefined.
    at /Users/cvp/anti-gravity/Ataraxia-Next/local-api-server.js:452:13
    at Layer.handleRequest (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/lib/layer.js:152:17)
    at next (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/lib/route.js:157:13)
    at Route.dispatch (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/lib/route.js:117:3)
    at handle (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/index.js:435:11)
    at Layer.handleRequest (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/lib/layer.js:152:17)
    at /Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/index.js:295:15
    at processParams (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/index.js:582:12)
    at next (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/index.js:291:5)
    at /Users/cvp/anti-gravity/Ataraxia-Next/local-api-server.js:73:3
[2026-02-01T03:46:03.722Z] POST /api/auth/register
‚ùå Registration error: TypeError: Cannot destructure property 'email' of 'req.body' as it is undefined.
    at /Users/cvp/anti-gravity/Ataraxia-Next/local-api-server.js:541:13
    at Layer.handleRequest (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/lib/layer.js:152:17)
    at next (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/lib/route.js:157:13)
    at Route.dispatch (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/lib/route.js:117:3)
    at handle (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/index.js:435:11)
    at Layer.handleRequest (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/lib/layer.js:152:17)
    at /Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/index.js:295:15
    at processParams (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/index.js:582:12)
    at next (/Users/cvp/anti-gravity/Ataraxia-Next/node_modules/router/index.js:291:5)
    at /Users/cvp/anti-gravity/Ataraxia-Next/local-api-server.js:73:3
[2026-02-01T03:46:03.725Z] GET /api/verification/status/test
[2026-02-01T03:46:03.749Z] GET /api/therapist
üìä Found 13 therapists (13 total)
[2026-02-01T03:46:03.794Z] GET /api/therapist/search
[2026-02-01T03:46:03.818Z] GET /api/auth/login
